{
    "contents" : "#'  @description Derives P(X+Y<quantile) using Gaussian copula, normal margins. If X and Y are position P/Ls,\n#'  then Value-at-Risk is equal to minus quantile.\n#'  @param quantile portfolio P/L qunatile, number\n#'  @param mu1 mean of first marginal P/L distribution, number\n#'  @param mu2 mean of second marginal P/L distribution, number\n#'  @param sigma1 standard deviation of first marginal P/L distribution, number, greater than zero\n#'  @param sigma2 standard deviation of second marginal P/L distribution, number, greater than zero\n#'  @param rho measure of correlation between two assets, number, must be in $[0;1)$\n#'  @param nsteps the number of steps used in the copula approximation. \n#'  Increase in the number of steps increases the accuracy, but also increases the computation time.\n#'  @title CDF of portfolio\ncdfsum.copula.gauss <- function(quantile, mu1, mu2, sigma1, sigma2, rho, nsteps){\n  \n  if (!((sigma1 > 0) & (sigma2 > 0))){\n    stop('Standard deviation must be greater than zero.') \n  } \n  \n  if (!((rho >= 0) & (rho < 1))){\n    stop('Correlation coefficient rho must be in [0;1)')\n  }\n  \n  if (!(nsteps > 0)){\n    stop('Number of steps in copula approximation nsteps must be greater than zero')\n  }\n  \n  \n  w.min <- 0.001\n  w.max <- 0.999\n  dw <- 0.001\n  w <- seq(w.min, w.max, by = dw )\n  y <- pnorm(quantile-qnorm(w,mu1,sigma1),mu2,sigma2)\n  \n  arg <- cbind(w,y)\n  first.copula <- apply(arg, 1, function(x){\n    copula.gauss(x[1],x[2],rho,nsteps)\n  })\n  \n  arg <- cbind(w-dw,y)\n  second.copula <- apply(arg[-1,], 1, function(x){\n    copula.gauss(x[1],x[2],rho,nsteps)\n  })\n  \n  approx.diff.copula <- (first.copula[-1]-second.copula)/dw\n  \n  return(sum(approx.diff.copula)*dw)\n}",
    "created" : 1427322998936.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2240818623",
    "id" : "BEE003FF",
    "lastKnownWriteTime" : 1427323014,
    "path" : "~/git/VaRgcop/R/cdfsum.R",
    "project_path" : "R/cdfsum.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}